=encoding utf8

=head1 NAME

Dancer::Session::CHI - CHI-based session engine for Dancer

=head1 SYNOPSIS

=for test_synopsis
sub set {}

In a L<Dancer> application:

	set plugins          => {
		'Cache::CHI' => {
			driver => 'Memory',
			global => 1
		}
	};
	set session          => 'CHI';
	set session_expires  => '1 hour';
	set chi_session_opts => { use_plugin => 1 };

In a F<config.yml>:

	plugins:
		Cache::CHI:
			driver: Memory
			global: 1

	session: CHI
	session_expires: 1 hour
	chi_session_opts:
		use_plugin: 1

=head1 DESCRIPTION

This module leverages the great L<CHI> to provide session management for L<Dancer> applications. Just as
L<Dancer::Session::KiokuDB> opens up L<KiokuDB>'s full range of KiokuDB::Backend* modules to be used in
Dancer session management, B<Dancer::Session::CHI> makes available the complete CHI::Driver::* collection.

=head1 CONFIGURATION

Under its C<chi_session_opts> key, Dancer::Session::CHI accepts a C<use_plugin> option that defaults to
C<0>. If set to C<1>, L<Dancer::Plugin::Cache::CHI> will be used directly for session management, with no
changes made to the plugin's configuration.

If C<use_plugin> is left false, all other options are passed through to construct a new L<CHI> object, even if
L<Dancer::Plugin::Cache::CHI> is also in use. This new object needn't use the same driver as the plugin.

=head1 CLASS METHODS

=head2 create()

Creates a new session object and returns it.

=head2 retrieve($id)

Returns the session object containing an ID of $id.

=head1 OBJECT METHODS

=head2 flush()

Writes all session data to the CHI storage backend.

=head2 destroy()

Ends a Dancer session and wipes all session data from the CHI storage backend.

=head1 AUTHOR

Richard Simões <rsimoes at cpan dot org>

=head1 COPYRIGHT AND LICENSE

Copyright © 2011 Richard Simões. This module is released under the terms of the
L<Artistic License 2.0|http://www.perlfoundation.org/artistic_license_2_0>
and may be modified and/or redistributed under the same or any compatible license.
